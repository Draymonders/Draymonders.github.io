# 基础

## 名词
- 两阶段提交 
    - `redolog` 存物理记录(某数据页data从x变为y)
    - `binlog` 存逻辑记录(某table某row，col从x变为y)

- 事务隔离实现
    - 未提交读
    - 已提交读 -> 每句SQL执行时创建视图
    - 可重复读 -> 事务开始时创建视图
    - 串行读

- 索引
    - 主键索引(聚簇索引) -> 叶子存所有数据
        - 使用自增主键更好 (业务主键的话，写树操作成本高)
    - 非主键索引 -> 叶子存主键值(查询所有数据需要回表到主键索引去查)
    - 覆盖索引 (尽可能走索引，增加查询效率)

- 最左前缀原则

- 锁
    - 全局锁
    - 表锁 (lock read/write)
    - 行级锁
        - 需要时才加上，**事务结束后**释放

- 事务
    - 依赖MVCC实现，每个事务开始会分配一个id，搭配`undolog`
    
# 优化操作

- 适当重建索引(索引可能因为删除或者分裂，导致数据页空洞，重建会提升利用率)


        